CREATE TABLE CLIENTE
(
  RUC VARCHAR(11) NOT NULL,
  RAZON_SOCIAL VARCHAR(150) NOT NULL,
  PRIMARY KEY (RUC)
);

CREATE TABLE PRACTICA
(
  DESCRIPCION VARCHAR(600) NOT NULL,
  TIPO_PRACTICA VARCHAR(8) NOT NULL,
  COD_PRACTICA VARCHAR(9) NOT NULL,
  PRIMARY KEY (COD_PRACTICA)
);

CREATE TABLE TIPO_GASTO
(
  TIPO VARCHAR(20) NOT NULL,
  DESCRIPCION VARCHAR(600),
  COD_TIPO VARCHAR(5) NOT NULL,
  PRIMARY KEY (COD_TIPO)
);

CREATE TABLE TIPO_COMPROBANTE
(
  TIPO VARCHAR(20) NOT NULL,
  DESCRIPCION VARCHAR(600),
  COD_TIPO VARCHAR(5) NOT NULL,
  PRIMARY KEY (COD_TIPO)
);

CREATE TABLE MONEDA
(
  COD_MONEDA VARCHAR(5) NOT NULL,
  NOMBRE VARCHAR(20) NOT NULL,
  PRIMARY KEY (COD_MONEDA)
);

CREATE TABLE TIPO_REPORTE
(
  DESCRIPCION VARCHAR(600),
  TIPO VARCHAR(20) NOT NULL,
  COD_TIPO VARCHAR(5) NOT NULL,
  PRIMARY KEY (COD_TIPO)
);

CREATE TABLE FIRMA
(
  COD_FIRMA VARCHAR(9) NOT NULL,
  FIRMA VARCHAR(600) NOT NULL,
  PRIMARY KEY (COD_FIRMA)
);

CREATE TABLE PERSONA
(
  DNI VARCHAR(8) NOT NULL,
  PRIMER_NOMBRE VARCHAR(40) NOT NULL,
  APELLIDO_M VARCHAR(20) NOT NULL,
  APELLIDO_P VARCHAR(20) NOT NULL,
  COD_FIRMA VARCHAR(9) NOT NULL,
  PRIMARY KEY (DNI),
  FOREIGN KEY (COD_FIRMA) REFERENCES FIRMA(COD_FIRMA)
);

CREATE TABLE PRESUPUESTO
(
  COD_PRESUPUESTO VARCHAR(9) NOT NULL,
  COSTO_EST NUMERIC(12,2) NOT NULL,
  COD_MONEDA VARCHAR(5) NOT NULL,
  PRIMARY KEY (COD_PRESUPUESTO),
  FOREIGN KEY (COD_MONEDA) REFERENCES MONEDA(COD_MONEDA)
);

CREATE TABLE GASTO
(
  COD_GASTO VARCHAR(9) NOT NULL,
  MAX_REMU NUMERIC(6,2) NOT NULL,
  COD_MONEDA VARCHAR(5) NOT NULL,
  PRIMARY KEY (COD_GASTO),
  FOREIGN KEY (COD_MONEDA) REFERENCES MONEDA(COD_MONEDA)
);

CREATE TABLE TRABAJADOR
(
  CONTRASENIA VARCHAR(20) NOT NULL,
  DNI VARCHAR(8) NOT NULL,
  PRIMARY KEY (DNI),
  FOREIGN KEY (DNI) REFERENCES PERSONA(DNI)
);

CREATE TABLE CONTACTO
(
  DNI VARCHAR(8) NOT NULL,
  RUC VARCHAR(11) NOT NULL,
  PRIMARY KEY (DNI),
  FOREIGN KEY (DNI) REFERENCES PERSONA(DNI),
  FOREIGN KEY (RUC) REFERENCES CLIENTE(RUC)
);

CREATE TABLE COMPROBANTE_PAGO
(
  IMPORTE NUMERIC(6,2) NOT NULL,
  FECHA DATE NOT NULL,
  PROVEEDOR VARCHAR(80) NOT NULL,
  NUMERO VARCHAR(11) NOT NULL,
  DESCRIPCION VARCHAR(600),
  COD_GASTO VARCHAR(9) NOT NULL,
  COD_MONEDA VARCHAR(5) NOT NULL,
  COD_TIPO_COMP VARCHAR(5) NOT NULL,
  COD_TIPO_GASTO VARCHAR(5) NOT NULL,
  PRIMARY KEY (NUMERO),
  FOREIGN KEY (COD_GASTO) REFERENCES GASTO(COD_GASTO),
  FOREIGN KEY (COD_MONEDA) REFERENCES MONEDA(COD_MONEDA),
  FOREIGN KEY (COD_TIPO_COMP) REFERENCES TIPO_COMPROBANTE(COD_TIPO),
  FOREIGN KEY (COD_TIPO_GASTO) REFERENCES TIPO_GASTO(COD_TIPO)
);

CREATE TABLE PERFIL
(
  NOMBRE VARCHAR(20) NOT NULL,
  SUELDO NUMERIC(6,2) NOT NULL,
  COD_MONEDA VARCHAR(5) NOT NULL,
  PRIMARY KEY (NOMBRE),
  FOREIGN KEY (COD_MONEDA) REFERENCES MONEDA(COD_MONEDA)
);

CREATE TABLE CORREO
(
  CORREO VARCHAR(60) NOT NULL,
  DNI VARCHAR(8) NOT NULL,
  PRIMARY KEY (CORREO, DNI),
  FOREIGN KEY (DNI) REFERENCES PERSONA(DNI)
);

CREATE TABLE DIRECCION
(
  COD_DIRECCION VARCHAR(9) NOT NULL,
  COD_POSTAL VARCHAR(10) NOT NULL,
  NOMBRE VARCHAR(35) NOT NULL,
  UNIDAD VARCHAR(35),
  DISTRITO VARCHAR(35) NOT NULL,
  PROVINCIA VARCHAR(35) NOT NULL,
  PAIS VARCHAR(35) NOT NULL,
  DNI VARCHAR(8) NOT NULL,
  PRIMARY KEY (COD_DIRECCION, DNI),
  FOREIGN KEY (DNI) REFERENCES PERSONA(DNI)
);

CREATE TABLE TELEFONO
(
  NUMERO VARCHAR(15) NOT NULL,
  PREFIJO VARCHAR(3) NOT NULL,
  DNI VARCHAR(8) NOT NULL,
  PRIMARY KEY (NUMERO, DNI),
  FOREIGN KEY (DNI) REFERENCES PERSONA(DNI)
);

CREATE TABLE PROYECTO
(
  NOMBRE VARCHAR(200) NOT NULL,
  COD_PROYECTO VARCHAR(9) NOT NULL,
  ESTADO VARCHAR(20) NOT NULL,
  FECHA_FIN_REAL DATE NOT NULL,
  FECHA_INICIO_REAL DATE NOT NULL,
  FECHA_INICIO_EST DATE NOT NULL,
  FECHA_FIN_EST DATE NOT NULL,
  DESCRIPCION VARCHAR(600),
  COD_PRESUPUESTO VARCHAR(9) NOT NULL,
  PRIMARY KEY (COD_PROYECTO),
  FOREIGN KEY (COD_PRESUPUESTO) REFERENCES PRESUPUESTO(COD_PRESUPUESTO)
);

CREATE TABLE REPORTE
(
  FECHA DATE NOT NULL,
  DESCRIPCION VARCHAR(600) NOT NULL,
  NRO_REPORTE NUMERIC(2,0) NOT NULL,
  FECHA DATE NOT NULL,
  COD_PROYECTO VARCHAR(9) NOT NULL,
  COD_TIPO VARCHAR(5) NOT NULL,
  PRIMARY KEY (NRO_REPORTE, COD_PROYECTO),
  FOREIGN KEY (COD_PROYECTO) REFERENCES PROYECTO(COD_PROYECTO),
  FOREIGN KEY (COD_TIPO) REFERENCES TIPO_REPORTE(COD_TIPO)
);

CREATE TABLE ACTA
(
  FECHA DATE NOT NULL,
  COD_ACTA VARCHAR(9) NOT NULL,
  ESTADO VARCHAR(20) NOT NULL,
  COD_PROYECTO VARCHAR(9) NOT NULL,
  PRIMARY KEY (COD_ACTA),
  FOREIGN KEY (COD_PROYECTO) REFERENCES PROYECTO(COD_PROYECTO)
);

CREATE TABLE PROYECTO_TRABAJADOR
(
  DNI VARCHAR(8) NOT NULL,
  COD_PROYECTO VARCHAR(9) NOT NULL,
  NOMBRE VARCHAR(20) NOT NULL,
  PRIMARY KEY (DNI, COD_PROYECTO),
  FOREIGN KEY (DNI) REFERENCES TRABAJADOR(DNI),
  FOREIGN KEY (COD_PROYECTO) REFERENCES PROYECTO(COD_PROYECTO),
  FOREIGN KEY (NOMBRE) REFERENCES PERFIL(NOMBRE)
);

CREATE TABLE ACTA_FIRMA
(
  FECHA DATE NOT NULL,
  COD_ACTA VARCHAR(9) NOT NULL,
  COD_FIRMA VARCHAR(9) NOT NULL,
  PRIMARY KEY (COD_ACTA, COD_FIRMA),
  FOREIGN KEY (COD_ACTA) REFERENCES ACTA(COD_ACTA),
  FOREIGN KEY (COD_FIRMA) REFERENCES FIRMA(COD_FIRMA)
);

CREATE TABLE ALCANCE
(
  ALCANCE VARCHAR(600) NOT NULL,
  COD_ALCANCE VARCHAR(9) NOT NULL,
  COD_PROYECTO VARCHAR(9) NOT NULL,
  PRIMARY KEY (COD_ALCANCE),
  FOREIGN KEY (COD_PROYECTO) REFERENCES PROYECTO(COD_PROYECTO)
);

CREATE TABLE ACTA_ACUERDO
(
  ACUERDO VARCHAR(600) NOT NULL,
  COD_ACUERDO VARCHAR(9) NOT NULL,
  COD_ACTA VARCHAR(9) NOT NULL,
  PRIMARY KEY (COD_ACUERDO),
  FOREIGN KEY (COD_ACTA) REFERENCES ACTA(COD_ACTA)
);

CREATE TABLE PROYECTO_CLIENTE
(
  RUC VARCHAR(11) NOT NULL,
  COD_PROYECTO VARCHAR(9) NOT NULL,
  PRIMARY KEY (RUC, COD_PROYECTO),
  FOREIGN KEY (RUC) REFERENCES CLIENTE(RUC),
  FOREIGN KEY (COD_PROYECTO) REFERENCES PROYECTO(COD_PROYECTO)
);

CREATE TABLE ACTIVIDAD
(
  NOMBRE VARCHAR(200) NOT NULL,
  DESCRIPCION VARCHAR(300),
  FECHA_INICIO_REAL DATE NOT NULL,
  FECHA_FIN_REAL DATE NOT NULL,
  FECHA_INICIO_EST DATE NOT NULL,
  FECHA_FIN_EST DATE NOT NULL,
  CANTIDAD_HORAS NUMERIC(6,2) NOT NULL,
  COD_ACTIVIDAD VARCHAR(9) NOT NULL,
  POSICION NUMERIC(2,0) NOT NULL,
  COD_GASTO VARCHAR(9),
  COD_ACTIVIDAD_PADRE VARCHAR(9),
  COD_PROYECTO VARCHAR(9) NOT NULL,
  PRIMARY KEY (COD_ACTIVIDAD),
  FOREIGN KEY (COD_GASTO) REFERENCES GASTO(COD_GASTO),
  FOREIGN KEY (COD_ACTIVIDAD_PADRE) REFERENCES ACTIVIDAD(COD_ACTIVIDAD),
  FOREIGN KEY (COD_PROYECTO) REFERENCES PROYECTO(COD_PROYECTO)
);

CREATE TABLE OBJETIVO
(
  POSICION NUMERIC(2,0) NOT NULL,
  DESCRIPCION VARCHAR(600) NOT NULL,
  COD_PROYECTO VARCHAR(9) NOT NULL,
  POSICION_PADRE NUMERIC(2,0) NOT NULL,
  COD_PROYECTO_PADRE VARCHAR(9) NOT NULL,
  PRIMARY KEY (POSICION, COD_PROYECTO),
  FOREIGN KEY (COD_PROYECTO) REFERENCES PROYECTO(COD_PROYECTO),
  FOREIGN KEY (POSICION_PADRE, COD_PROYECTO_PADRE) REFERENCES OBJETIVO(POSICION, COD_PROYECTO)
);

CREATE TABLE TRABAJADOR_ACTIVIDAD
(
  FECHA DATE NOT NULL,
  CANTI_HORAS NUMERIC(4,2) NOT NULL,
  DNI VARCHAR(8) NOT NULL,
  COD_ACTIVIDAD VARCHAR(9) NOT NULL,
  PRIMARY KEY (DNI),
  FOREIGN KEY (DNI) REFERENCES TRABAJADOR(DNI),
  FOREIGN KEY (COD_ACTIVIDAD) REFERENCES ACTIVIDAD(COD_ACTIVIDAD)
);


CREATE TABLE OBJETIVO_A
(
  OBJETIVO VARCHAR(600) NOT NULL,
  COD_OBJETIVO VARCHAR(9) NOT NULL,
  COD_ACTIVIDAD VARCHAR(9) NOT NULL,
  PRIMARY KEY (COD_OBJETIVO),
  FOREIGN KEY (COD_ACTIVIDAD) REFERENCES ACTIVIDAD(COD_ACTIVIDAD)
);

CREATE TABLE PRACTICA_ACTIVIDAD
(
  COD_PRACTICA VARCHAR(9) NOT NULL,
  COD_ACTIVIDAD VARCHAR(9) NOT NULL,
  PRIMARY KEY (COD_PRACTICA),
  FOREIGN KEY (COD_PRACTICA) REFERENCES PRACTICA(COD_PRACTICA),
  FOREIGN KEY (COD_ACTIVIDAD) REFERENCES ACTIVIDAD(COD_ACTIVIDAD)
);


